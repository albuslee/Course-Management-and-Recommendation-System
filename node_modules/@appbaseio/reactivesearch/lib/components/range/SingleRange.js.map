{"version":3,"sources":["../../../src/components/range/SingleRange.js"],"names":["SingleRange","props","state","currentValue","type","locked","setQueryListener","componentId","onQueryChange","componentWillMount","addComponent","setReact","selectedValue","setValue","defaultSelected","componentWillReceiveProps","nextProps","react","dataField","updateQuery","componentWillUnmount","removeComponent","watchComponent","render","style","className","title","innerClass","data","map","item","selected","label","handleClick","showRadio","parseValue","value","find","defaultQuery","range","gte","start","lte","end","boost","beforeValueChange","performUpdate","setState","onValueChange","query","customQuery","filterLabel","showFilter","URLParams","e","target","propTypes","funcRequired","func","string","stringRequired","bool","boolRequired","defaultProps","mapStateToProps","selectedValues","mapDispatchtoProps","dispatch","component","updateQueryObject","beforeQueryChange"],"mappings":"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","file":"SingleRange.js","sourcesContent":["import React, { Component } from 'react';\n\nimport {\n\taddComponent,\n\tremoveComponent,\n\twatchComponent,\n\tupdateQuery,\n\tsetQueryListener,\n} from '@appbaseio/reactivecore/lib/actions';\nimport {\n\tisEqual,\n\tcheckValueChange,\n\tcheckPropChange,\n\tgetClassName,\n} from '@appbaseio/reactivecore/lib/utils/helper';\n\nimport types from '@appbaseio/reactivecore/lib/utils/types';\n\nimport Title from '../../styles/Title';\nimport Container from '../../styles/Container';\nimport { UL, Radio } from '../../styles/FormControlList';\nimport { connect } from '../../utils';\n\nclass SingleRange extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcurrentValue: null,\n\t\t};\n\t\tthis.type = 'range';\n\t\tthis.locked = false;\n\t\tprops.setQueryListener(props.componentId, props.onQueryChange, null);\n\t}\n\n\tcomponentWillMount() {\n\t\tthis.props.addComponent(this.props.componentId);\n\t\tthis.setReact(this.props);\n\n\t\tif (this.props.selectedValue) {\n\t\t\tthis.setValue(this.props.selectedValue);\n\t\t} else if (this.props.defaultSelected) {\n\t\t\tthis.setValue(this.props.defaultSelected);\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tcheckPropChange(\n\t\t\tthis.props.react,\n\t\t\tnextProps.react,\n\t\t\t() => this.setReact(nextProps),\n\t\t);\n\n\t\tcheckPropChange(this.props.dataField, nextProps.dataField, () => {\n\t\t\tthis.updateQuery(this.state.currentValue, nextProps);\n\t\t});\n\n\t\tif (!isEqual(this.props.defaultSelected, nextProps.defaultSelected)) {\n\t\t\tthis.setValue(nextProps.defaultSelected);\n\t\t} else if (!isEqual(this.state.currentValue, nextProps.selectedValue)) {\n\t\t\tthis.setValue(nextProps.selectedValue);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.props.removeComponent(this.props.componentId);\n\t}\n\n\tsetReact(props) {\n\t\tif (props.react) {\n\t\t\tprops.watchComponent(props.componentId, props.react);\n\t\t}\n\t}\n\n\t// parses range label to get start and end\n\tstatic parseValue = (value, props) => props.data.find(item => item.label === value) || null\n\n\tstatic defaultQuery = (value, props) => {\n\t\tif (value) {\n\t\t\treturn {\n\t\t\t\trange: {\n\t\t\t\t\t[props.dataField]: {\n\t\t\t\t\t\tgte: value.start,\n\t\t\t\t\t\tlte: value.end,\n\t\t\t\t\t\tboost: 2.0,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n\n\tsetValue = (value, props = this.props) => {\n\t\t// ignore state updates when component is locked\n\t\tif (props.beforeValueChange && this.locked) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.locked = true;\n\t\tconst currentValue = SingleRange.parseValue(value, props);\n\n\t\tconst performUpdate = () => {\n\t\t\tthis.setState({\n\t\t\t\tcurrentValue,\n\t\t\t}, () => {\n\t\t\t\tthis.updateQuery(currentValue, props);\n\t\t\t\tthis.locked = false;\n\t\t\t\tif (props.onValueChange) props.onValueChange(currentValue);\n\t\t\t});\n\t\t};\n\n\t\tcheckValueChange(\n\t\t\tprops.componentId,\n\t\t\tcurrentValue,\n\t\t\tprops.beforeValueChange,\n\t\t\tperformUpdate,\n\t\t);\n\t}\n\n\tupdateQuery = (value, props) => {\n\t\tconst query = props.customQuery || SingleRange.defaultQuery;\n\n\t\tprops.updateQuery({\n\t\t\tcomponentId: props.componentId,\n\t\t\tquery: query(value, props),\n\t\t\tvalue,\n\t\t\tlabel: props.filterLabel,\n\t\t\tshowFilter: props.showFilter,\n\t\t\tURLParams: props.URLParams,\n\t\t});\n\t};\n\n\thandleClick = (e) => {\n\t\tthis.setValue(e.target.value);\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<Container style={this.props.style} className={this.props.className}>\n\t\t\t\t{this.props.title && <Title className={getClassName(this.props.innerClass, 'title') || null}>{this.props.title}</Title>}\n\t\t\t\t<UL className={getClassName(this.props.innerClass, 'list') || null}>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.data.map((item) => {\n\t\t\t\t\t\t\tconst selected = !!this.state.currentValue\n\t\t\t\t\t\t\t\t&& this.state.currentValue.label === item.label;\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li key={item.label} className={`${selected ? 'active' : ''}`}>\n\t\t\t\t\t\t\t\t\t<Radio\n\t\t\t\t\t\t\t\t\t\tclassName={getClassName(this.props.innerClass, 'radio')}\n\t\t\t\t\t\t\t\t\t\tid={`${this.props.componentId}-${item.label}`}\n\t\t\t\t\t\t\t\t\t\tname={this.props.componentId}\n\t\t\t\t\t\t\t\t\t\tvalue={item.label}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleClick}\n\t\t\t\t\t\t\t\t\t\tchecked={selected}\n\t\t\t\t\t\t\t\t\t\tshow={this.props.showRadio}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\tclassName={getClassName(this.props.innerClass, 'label') || null}\n\t\t\t\t\t\t\t\t\t\thtmlFor={`${this.props.componentId}-${item.label}`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{item.label}\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t</UL>\n\t\t\t</Container>\n\t\t);\n\t}\n}\n\nSingleRange.propTypes = {\n\taddComponent: types.funcRequired,\n\tremoveComponent: types.funcRequired,\n\tsetQueryListener: types.funcRequired,\n\tupdateQuery: types.funcRequired,\n\twatchComponent: types.funcRequired,\n\tselectedValue: types.selectedValue,\n\t// component props\n\tbeforeValueChange: types.func,\n\tclassName: types.string,\n\tcomponentId: types.stringRequired,\n\tcustomQuery: types.func,\n\tdata: types.data,\n\tdataField: types.stringRequired,\n\tdefaultSelected: types.string,\n\tfilterLabel: types.string,\n\tinnerClass: types.style,\n\tonQueryChange: types.func,\n\tonValueChange: types.func,\n\treact: types.react,\n\tshowFilter: types.bool,\n\tshowRadio: types.boolRequired,\n\tstyle: types.style,\n\ttitle: types.title,\n\tURLParams: types.bool,\n};\n\nSingleRange.defaultProps = {\n\tclassName: null,\n\tshowFilter: true,\n\tshowRadio: true,\n\tstyle: {},\n\tURLParams: false,\n};\n\nconst mapStateToProps = (state, props) => ({\n\tselectedValue: (\n\t\tstate.selectedValues[props.componentId]\n\t\t&& state.selectedValues[props.componentId].value\n\t) || null,\n});\n\nconst mapDispatchtoProps = dispatch => ({\n\taddComponent: component => dispatch(addComponent(component)),\n\tremoveComponent: component => dispatch(removeComponent(component)),\n\tupdateQuery: updateQueryObject => dispatch(updateQuery(updateQueryObject)),\n\twatchComponent: (component, react) => dispatch(watchComponent(component, react)),\n\tsetQueryListener: (component, onQueryChange, beforeQueryChange) =>\n\t\tdispatch(setQueryListener(component, onQueryChange, beforeQueryChange)),\n});\n\nexport default connect(mapStateToProps, mapDispatchtoProps)(SingleRange);\n"]}