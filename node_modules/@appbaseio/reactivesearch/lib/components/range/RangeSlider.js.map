{"version":3,"sources":["../../../src/components/range/RangeSlider.js"],"names":["RangeSlider","props","state","currentValue","range","start","end","stats","locked","internalComponent","componentId","setQueryListener","onQueryChange","componentWillMount","addComponent","updateQueryOptions","setReact","selectedValue","defaultSelected","Array","isArray","handleChange","parseValue","componentWillReceiveProps","nextProps","react","options","sort","a","b","key","setState","dataField","shouldComponentUpdate","upperLimit","Math","floor","stepValue","console","warn","componentWillUnmount","removeComponent","render","style","className","title","innerClass","length","showHistogram","showSlider","getValidInterval","handleSlider","handleDrag","snap","getSnapPoints","rangeLabels","value","defaultQuery","gte","lte","boost","newReact","watchComponent","and","snapPoints","i","concat","min","ceil","interval","error","histogramQuery","histogram","field","offset","beforeValueChange","performUpdate","updateQuery","onValueChange","values","onDrag","max","query","customQuery","label","filterLabel","showFilter","URLParams","queryOptions","aggs","setQueryOptions","propTypes","funcRequired","func","string","stringRequired","number","bool","defaultProps","mapStateToProps","aggregations","buckets","selectedValues","mapDispatchtoProps","dispatch","component","execute","beforeQueryChange","updateQueryObject"],"mappings":"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","file":"RangeSlider.js","sourcesContent":["import React, { Component } from 'react';\nimport {\n\taddComponent,\n\tremoveComponent,\n\twatchComponent,\n\tupdateQuery,\n\tsetQueryOptions,\n\tsetQueryListener,\n} from '@appbaseio/reactivecore/lib/actions';\nimport {\n\tisEqual,\n\tcheckValueChange,\n\tcheckPropChange,\n\tcheckSomePropChange,\n\tgetClassName,\n\tpushToAndClause,\n} from '@appbaseio/reactivecore/lib/utils/helper';\nimport types from '@appbaseio/reactivecore/lib/utils/types';\nimport Rheostat from 'rheostat/lib/Slider';\n\nimport HistogramContainer from './addons/HistogramContainer';\nimport RangeLabel from './addons/RangeLabel';\nimport Slider from '../../styles/Slider';\nimport Title from '../../styles/Title';\nimport { rangeLabelsContainer } from '../../styles/Label';\nimport { connect } from '../../utils';\n\nclass RangeSlider extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcurrentValue: [props.range.start, props.range.end],\n\t\t\tstats: [],\n\t\t};\n\n\t\tthis.locked = false;\n\t\tthis.internalComponent = `${this.props.componentId}__internal`;\n\t\tprops.setQueryListener(props.componentId, props.onQueryChange, null);\n\t}\n\n\tcomponentWillMount() {\n\t\tthis.props.addComponent(this.props.componentId);\n\t\tthis.props.addComponent(this.internalComponent);\n\n\t\tthis.updateQueryOptions(this.props);\n\t\tthis.setReact(this.props);\n\n\t\tconst { selectedValue, defaultSelected } = this.props;\n\t\tif (Array.isArray(selectedValue)) {\n\t\t\tthis.handleChange(selectedValue);\n\t\t} else if (selectedValue) {\n\t\t\t// for value as an object for SSR\n\t\t\tthis.handleChange(RangeSlider.parseValue(selectedValue, this.props));\n\t\t} else if (defaultSelected) {\n\t\t\tthis.handleChange(RangeSlider.parseValue(defaultSelected, this.props));\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tcheckPropChange(this.props.react, nextProps.react, () =>\n\t\t\tthis.setReact(nextProps));\n\t\tcheckSomePropChange(\n\t\t\tthis.props,\n\t\t\tnextProps,\n\t\t\t['showHistogram', 'interval'],\n\t\t\t() => this.updateQueryOptions(nextProps),\n\t\t);\n\t\tcheckPropChange(this.props.options, nextProps.options, () => {\n\t\t\tconst { options } = nextProps;\n\t\t\tif (Array.isArray(options)) {\n\t\t\t\toptions.sort((a, b) => {\n\t\t\t\t\tif (a.key < b.key) return -1;\n\t\t\t\t\tif (a.key > b.key) return 1;\n\t\t\t\t\treturn 0;\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tstats: options || [],\n\t\t\t});\n\t\t});\n\n\t\tcheckPropChange(this.props.dataField, nextProps.dataField, () => {\n\t\t\tthis.updateQueryOptions(nextProps);\n\t\t\tthis.handleChange(this.state.currentValue, nextProps);\n\t\t});\n\n\t\tif (!isEqual(this.props.defaultSelected, nextProps.defaultSelected)) {\n\t\t\tthis.handleChange(\n\t\t\t\t[nextProps.defaultSelected.start, nextProps.defaultSelected.end],\n\t\t\t\tnextProps,\n\t\t\t);\n\t\t} else if (!isEqual(this.state.currentValue, nextProps.selectedValue)) {\n\t\t\tthis.handleChange(nextProps.selectedValue || [nextProps.range.start, nextProps.range.end]);\n\t\t}\n\t}\n\n\tshouldComponentUpdate(nextProps) {\n\t\tconst upperLimit = Math.floor((nextProps.range.end - nextProps.range.start) / 2);\n\t\tif (nextProps.stepValue < 1 || nextProps.stepValue > upperLimit) {\n\t\t\tconsole.warn(`stepValue for RangeSlider ${nextProps.componentId} should be greater than 0 and less than or equal to ${upperLimit}`);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.props.removeComponent(this.props.componentId);\n\t\tthis.props.removeComponent(this.internalComponent);\n\t}\n\n\tsetReact = (props) => {\n\t\tconst { react } = props;\n\t\tif (react) {\n\t\t\tconst newReact = pushToAndClause(react, this.internalComponent);\n\t\t\tprops.watchComponent(props.componentId, newReact);\n\t\t} else {\n\t\t\tprops.watchComponent(props.componentId, { and: this.internalComponent });\n\t\t}\n\t};\n\n\tstatic parseValue = (value, props) => (value\n\t\t? [value.start, value.end]\n\t\t: [props.range.start, props.range.end]\n\t)\n\n\tstatic defaultQuery = (value, props) => {\n\t\tif (Array.isArray(value) && value.length) {\n\t\t\treturn {\n\t\t\t\trange: {\n\t\t\t\t\t[props.dataField]: {\n\t\t\t\t\t\tgte: value[0],\n\t\t\t\t\t\tlte: value[1],\n\t\t\t\t\t\tboost: 2.0,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t};\n\n\tgetSnapPoints = () => {\n\t\tlet snapPoints = [];\n\t\tlet { stepValue } = this.props;\n\n\t\t// limit the number of steps to prevent generating a large number of snapPoints\n\t\tif ((this.props.range.end - this.props.range.start) / stepValue > 100) {\n\t\t\tstepValue = (this.props.range.end - this.props.range.start) / 100;\n\t\t}\n\n\t\tfor (let i = this.props.range.start; i <= this.props.range.end; i += stepValue) {\n\t\t\tsnapPoints = snapPoints.concat(i);\n\t\t}\n\t\tif (snapPoints[snapPoints.length - 1] !== this.props.range.end) {\n\t\t\tsnapPoints = snapPoints.concat(this.props.range.end);\n\t\t}\n\t\treturn snapPoints;\n\t};\n\n\tgetValidInterval = (props) => {\n\t\tconst min = Math.ceil((props.range.end - props.range.start) / 100) || 1;\n\t\tif (!props.interval) {\n\t\t\treturn min;\n\t\t} else if (props.interval < min) {\n\t\t\tconsole.error(`${props.componentId}: interval prop's value should be greater than or equal to ${min}`);\n\t\t\treturn min;\n\t\t}\n\t\treturn props.interval;\n\t};\n\n\thistogramQuery = props => ({\n\t\t[props.dataField]: {\n\t\t\thistogram: {\n\t\t\t\tfield: props.dataField,\n\t\t\t\tinterval: this.getValidInterval(props),\n\t\t\t\toffset: props.range.start,\n\t\t\t},\n\t\t},\n\t});\n\n\thandleChange = (currentValue, props = this.props) => {\n\t\t// ignore state updates when component is locked\n\t\tif (props.beforeValueChange && this.locked) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.locked = true;\n\t\tconst performUpdate = () => {\n\t\t\tthis.setState({\n\t\t\t\tcurrentValue,\n\t\t\t}, () => {\n\t\t\t\tthis.updateQuery([currentValue[0], currentValue[1]], props);\n\t\t\t\tthis.locked = false;\n\t\t\t\tif (props.onValueChange) {\n\t\t\t\t\tprops.onValueChange({\n\t\t\t\t\t\tstart: currentValue[0],\n\t\t\t\t\t\tend: currentValue[1],\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\tcheckValueChange(\n\t\t\tprops.componentId,\n\t\t\t{\n\t\t\t\tstart: currentValue[0],\n\t\t\t\tend: currentValue[1],\n\t\t\t},\n\t\t\tprops.beforeValueChange,\n\t\t\tperformUpdate,\n\t\t);\n\t};\n\n\thandleSlider = ({ values }) => {\n\t\tif (!isEqual(values, this.state.currentValue)) {\n\t\t\tthis.handleChange(values);\n\t\t}\n\t};\n\n\thandleDrag = (values) => {\n\t\tif (this.props.onDrag) {\n\t\t\tconst { min, max, values: currentValue } = values;\n\t\t\tthis.props.onDrag(currentValue, [min, max]);\n\t\t}\n\t};\n\n\tupdateQuery = (value, props) => {\n\t\tconst query = props.customQuery || RangeSlider.defaultQuery;\n\n\t\tprops.updateQuery({\n\t\t\tcomponentId: props.componentId,\n\t\t\tquery: query(value, props),\n\t\t\tvalue,\n\t\t\tlabel: props.filterLabel,\n\t\t\tshowFilter: false, // disable filters for RangeSlider\n\t\t\tURLParams: props.URLParams,\n\t\t});\n\t};\n\n\tupdateQueryOptions = (props) => {\n\t\tif (props.showHistogram) {\n\t\t\tconst queryOptions = {\n\t\t\t\taggs: this.histogramQuery(props),\n\t\t\t};\n\n\t\t\tprops.setQueryOptions(this.internalComponent, queryOptions, false);\n\n\t\t\tconst query = props.customQuery || RangeSlider.defaultQuery;\n\n\t\t\tprops.updateQuery({\n\t\t\t\tcomponentId: this.internalComponent,\n\t\t\t\tquery: query([props.range.start, props.range.end], props),\n\t\t\t});\n\t\t}\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<Slider primary style={this.props.style} className={this.props.className}>\n\t\t\t\t{this.props.title && (\n\t\t\t\t\t<Title\n\t\t\t\t\t\tclassName={getClassName(this.props.innerClass, 'title') || null}\n\t\t\t\t\t>\n\t\t\t\t\t\t{this.props.title}\n\t\t\t\t\t</Title>\n\t\t\t\t)}\n\t\t\t\t{this.state.stats.length && this.props.showHistogram && this.props.showSlider ? (\n\t\t\t\t\t<HistogramContainer\n\t\t\t\t\t\tstats={this.state.stats}\n\t\t\t\t\t\trange={this.props.range}\n\t\t\t\t\t\tinterval={this.getValidInterval(this.props)}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t\t{\n\t\t\t\t\tthis.props.showSlider\n\t\t\t\t\t&& <Rheostat\n\t\t\t\t\t\tmin={this.props.range.start}\n\t\t\t\t\t\tmax={this.props.range.end}\n\t\t\t\t\t\tvalues={this.state.currentValue}\n\t\t\t\t\t\tonChange={this.handleSlider}\n\t\t\t\t\t\tonValuesUpdated={this.handleDrag}\n\t\t\t\t\t\tsnap={this.props.snap}\n\t\t\t\t\t\tsnapPoints={this.props.snap ? this.getSnapPoints() : null}\n\t\t\t\t\t\tclassName={getClassName(this.props.innerClass, 'slider')}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\t{this.props.rangeLabels && this.props.showSlider && (\n\t\t\t\t\t<div className={rangeLabelsContainer}>\n\t\t\t\t\t\t<RangeLabel\n\t\t\t\t\t\t\talign=\"left\"\n\t\t\t\t\t\t\tclassName={getClassName(this.props.innerClass, 'label') || null}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.props.rangeLabels.start}\n\t\t\t\t\t\t</RangeLabel>\n\t\t\t\t\t\t<RangeLabel\n\t\t\t\t\t\t\talign=\"right\"\n\t\t\t\t\t\t\tclassName={getClassName(this.props.innerClass, 'label') || null}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.props.rangeLabels.end}\n\t\t\t\t\t\t</RangeLabel>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</Slider>\n\t\t);\n\t}\n}\n\nRangeSlider.propTypes = {\n\taddComponent: types.funcRequired,\n\tremoveComponent: types.funcRequired,\n\tsetQueryListener: types.funcRequired,\n\tsetQueryOptions: types.funcRequired,\n\tupdateQuery: types.funcRequired,\n\twatchComponent: types.funcRequired,\n\toptions: types.options,\n\tselectedValue: types.selectedValue,\n\t// component props\n\tbeforeValueChange: types.func,\n\tclassName: types.string,\n\tcomponentId: types.stringRequired,\n\tcustomQuery: types.func,\n\tdataField: types.stringRequired,\n\tdefaultSelected: types.range,\n\tfilterLabel: types.string,\n\tinnerClass: types.style,\n\tinterval: types.number,\n\tonDrag: types.func,\n\tonQueryChange: types.func,\n\tonValueChange: types.func,\n\trange: types.range,\n\trangeLabels: types.rangeLabels,\n\treact: types.react,\n\tshowHistogram: types.bool,\n\tshowSlider: types.bool,\n\tsnap: types.bool,\n\tstepValue: types.number,\n\tstyle: types.style,\n\ttitle: types.title,\n\tURLParams: types.bool,\n};\n\nRangeSlider.defaultProps = {\n\tclassName: null,\n\trange: {\n\t\tstart: 0,\n\t\tend: 10,\n\t},\n\tshowHistogram: true,\n\tshowSlider: true,\n\tsnap: true,\n\tstepValue: 1,\n\tstyle: {},\n\tURLParams: false,\n};\n\nconst mapStateToProps = (state, props) => ({\n\toptions: state.aggregations[props.componentId]\n\t\t? (state.aggregations[props.componentId][props.dataField]\n\t\t\t&& state.aggregations[props.componentId][props.dataField].buckets)\n\t\t: [],\n\tselectedValue: state.selectedValues[props.componentId]\n\t\t? state.selectedValues[props.componentId].value\n\t\t: null,\n});\n\nconst mapDispatchtoProps = dispatch => ({\n\taddComponent: component => dispatch(addComponent(component)),\n\tremoveComponent: component => dispatch(removeComponent(component)),\n\tsetQueryOptions: (component, props, execute) =>\n\t\tdispatch(setQueryOptions(component, props, execute)),\n\tsetQueryListener: (component, onQueryChange, beforeQueryChange) =>\n\t\tdispatch(setQueryListener(component, onQueryChange, beforeQueryChange)),\n\tupdateQuery: updateQueryObject => dispatch(updateQuery(updateQueryObject)),\n\twatchComponent: (component, react) => dispatch(watchComponent(component, react)),\n});\n\nexport default connect(mapStateToProps, mapDispatchtoProps)(RangeSlider);\n"]}