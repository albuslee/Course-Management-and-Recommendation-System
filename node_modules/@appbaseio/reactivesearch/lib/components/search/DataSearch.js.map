{"version":3,"sources":["../../../src/components/search/DataSearch.js"],"names":["DataSearch","props","state","currentValue","suggestions","isOpen","internalComponent","componentId","locked","setQueryListener","onQueryChange","componentWillMount","addComponent","highlight","queryOptions","highlightQuery","size","setQueryOptions","setReact","selectedValue","setValue","defaultSelected","componentWillReceiveProps","nextProps","react","Array","isArray","trim","length","setState","onSuggestions","updateQuery","componentWillUnmount","removeComponent","render","suggestionsList","defaultSuggestions","theme","themePreset","style","className","title","innerClass","autosuggest","onSuggestionSelected","handleOuterClick","handleStateChange","i","getInputProps","getItemProps","highlightedIndex","showIcon","showClear","iconPosition","innerRef","placeholder","value","onChange","onInputChange","onBlur","onFocus","handleFocus","onKeyPress","onKeyDown","handleKeyDown","onKeyUp","renderIcons","slice","map","item","index","backgroundColor","getBackgroundColor","label","__html","autoFocus","customHighlight","fields","highlightField","dataField","forEach","pre_tags","post_tags","defaultQuery","finalQuery","bool","should","shouldQuery","minimum_should_match","match_all","dataFields","field","fieldWeights","queryFormat","multi_match","query","type","operator","fuzziness","newReact","watchComponent","and","results","onSuggestion","suggestion","toLowerCase","isDefaultValue","beforeValueChange","performUpdate","handleTextChange","onValueChange","debounce","customQuery","filterLabel","showFilter","URLParams","event","clearValue","console","log","onValueSelected","key","target","blur","e","changes","stateChangeTypes","mouseUp","isDark","renderIcon","icon","renderCancelIcon","clearIcon","propTypes","funcRequired","options","func","string","children","stringRequired","dataFieldArray","number","stringOrArray","queryFormatSearch","defaultProps","mapStateToProps","selectedValues","hits","config","mapDispatchtoProps","dispatch","component","updateQueryObject","beforeQueryChange"],"mappings":"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","file":"DataSearch.js","sourcesContent":["import React, { Component } from 'react';\nimport Downshift from 'downshift';\nimport { withTheme } from 'emotion-theming';\n\nimport {\n\taddComponent,\n\tremoveComponent,\n\twatchComponent,\n\tupdateQuery,\n\tsetQueryOptions,\n\tsetQueryListener,\n} from '@appbaseio/reactivecore/lib/actions';\nimport {\n\tdebounce,\n\tpushToAndClause,\n\tcheckValueChange,\n\tcheckPropChange,\n\tcheckSomePropChange,\n\tgetClassName,\n} from '@appbaseio/reactivecore/lib/utils/helper';\n\nimport types from '@appbaseio/reactivecore/lib/utils/types';\nimport getSuggestions from '@appbaseio/reactivecore/lib/utils/suggestions';\nimport Title from '../../styles/Title';\nimport Input, { suggestionsContainer, suggestions } from '../../styles/Input';\nimport SearchSvg from '../shared/SearchSvg';\nimport CancelSvg from '../shared/CancelSvg';\nimport InputIcon from '../../styles/InputIcon';\nimport Container from '../../styles/Container';\nimport { connect } from '../../utils';\n\n\nclass DataSearch extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcurrentValue: '',\n\t\t\tsuggestions: [],\n\t\t\tisOpen: false,\n\t\t};\n\t\tthis.internalComponent = `${props.componentId}__internal`;\n\t\tthis.locked = false;\n\t\tprops.setQueryListener(props.componentId, props.onQueryChange, null);\n\t}\n\n\tcomponentWillMount() {\n\t\tthis.props.addComponent(this.props.componentId);\n\t\tthis.props.addComponent(this.internalComponent);\n\n\t\tif (this.props.highlight) {\n\t\t\tconst queryOptions = DataSearch.highlightQuery(this.props) || {};\n\t\t\tqueryOptions.size = 20;\n\t\t\tthis.props.setQueryOptions(this.props.componentId, queryOptions);\n\t\t} else {\n\t\t\tthis.props.setQueryOptions(this.props.componentId, {\n\t\t\t\tsize: 20,\n\t\t\t});\n\t\t}\n\t\tthis.setReact(this.props);\n\n\t\tif (this.props.selectedValue) {\n\t\t\tthis.setValue(this.props.selectedValue, true);\n\t\t} else if (this.props.defaultSelected) {\n\t\t\tthis.setValue(this.props.defaultSelected, true);\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tcheckSomePropChange(\n\t\t\tthis.props,\n\t\t\tnextProps,\n\t\t\t['highlight', 'dataField', 'highlightField'],\n\t\t\t() => {\n\t\t\t\tconst queryOptions = DataSearch.highlightQuery(nextProps) || {};\n\t\t\t\tqueryOptions.size = 20;\n\t\t\t\tthis.props.setQueryOptions(nextProps.componentId, queryOptions);\n\t\t\t},\n\t\t);\n\n\t\tcheckPropChange(\n\t\t\tthis.props.react,\n\t\t\tnextProps.react,\n\t\t\t() => this.setReact(nextProps),\n\t\t);\n\n\t\tif (Array.isArray(nextProps.suggestions) && this.state.currentValue.trim().length) {\n\t\t\t// shallow check allows us to set suggestions even if the next set\n\t\t\t// of suggestions are same as the current one\n\t\t\tif (this.props.suggestions !== nextProps.suggestions) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tsuggestions: this.onSuggestions(nextProps.suggestions),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tcheckSomePropChange(\n\t\t\tthis.props,\n\t\t\tnextProps,\n\t\t\t['fieldWeights', 'fuzziness', 'queryFormat', 'dataField'],\n\t\t\t() => {\n\t\t\t\tthis.updateQuery(nextProps.componentId, this.state.currentValue, nextProps);\n\t\t\t},\n\t\t);\n\n\t\tif (this.props.defaultSelected !== nextProps.defaultSelected) {\n\t\t\tthis.setValue(nextProps.defaultSelected, true, nextProps);\n\t\t} else if (\n\t\t\t// since, selectedValue will be updated when currentValue changes,\n\t\t\t// we must only check for the changes introduced by\n\t\t\t// clear action from SelectedFilters component in which case,\n\t\t\t// the currentValue will never match the updated selectedValue\n\t\t\tthis.props.selectedValue !== nextProps.selectedValue\n\t\t\t&& this.state.currentValue !== nextProps.selectedValue\n\t\t) {\n\t\t\tthis.setValue(nextProps.selectedValue || '', true, nextProps);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.props.removeComponent(this.props.componentId);\n\t\tthis.props.removeComponent(this.internalComponent);\n\t}\n\n\tsetReact = (props) => {\n\t\tconst { react } = props;\n\t\tif (react) {\n\t\t\tconst newReact = pushToAndClause(react, this.internalComponent);\n\t\t\tprops.watchComponent(props.componentId, newReact);\n\t\t} else {\n\t\t\tprops.watchComponent(props.componentId, { and: this.internalComponent });\n\t\t}\n\t};\n\n\tstatic highlightQuery = (props) => {\n\t\tif (props.customHighlight) {\n\t\t\treturn props.customHighlight(props);\n\t\t}\n\t\tif (!props.highlight) {\n\t\t\treturn null;\n\t\t}\n\t\tconst fields = {};\n\t\tconst highlightField = props.highlightField ? props.highlightField : props.dataField;\n\n\t\tif (typeof highlightField === 'string') {\n\t\t\tfields[highlightField] = {};\n\t\t} else if (Array.isArray(highlightField)) {\n\t\t\thighlightField.forEach((item) => {\n\t\t\t\tfields[item] = {};\n\t\t\t});\n\t\t}\n\n\t\treturn {\n\t\t\thighlight: {\n\t\t\t\tpre_tags: ['<mark>'],\n\t\t\t\tpost_tags: ['</mark>'],\n\t\t\t\tfields,\n\t\t\t},\n\t\t};\n\t};\n\n\tstatic defaultQuery = (value, props) => {\n\t\tlet finalQuery = null;\n\t\tlet fields;\n\n\t\tif (value) {\n\t\t\tif (Array.isArray(props.dataField)) {\n\t\t\t\tfields = props.dataField;\n\t\t\t} else {\n\t\t\t\tfields = [props.dataField];\n\t\t\t}\n\t\t\tfinalQuery = {\n\t\t\t\tbool: {\n\t\t\t\t\tshould: DataSearch.shouldQuery(value, fields, props),\n\t\t\t\t\tminimum_should_match: '1',\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tif (value === '') {\n\t\t\tfinalQuery = {\n\t\t\t\tmatch_all: {},\n\t\t\t};\n\t\t}\n\n\t\treturn finalQuery;\n\t};\n\n\tstatic shouldQuery = (value, dataFields, props) => {\n\t\tconst fields = dataFields.map((field, index) =>\n\t\t\t`${field}${\n\t\t\t\tArray.isArray(props.fieldWeights) && props.fieldWeights[index]\n\t\t\t\t\t? `^${props.fieldWeights[index]}`\n\t\t\t\t\t: ''\n\t\t\t}`);\n\n\t\tif (props.queryFormat === 'and') {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tmulti_match: {\n\t\t\t\t\t\tquery: value,\n\t\t\t\t\t\tfields,\n\t\t\t\t\t\ttype: 'cross_fields',\n\t\t\t\t\t\toperator: 'and',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tmulti_match: {\n\t\t\t\t\t\tquery: value,\n\t\t\t\t\t\tfields,\n\t\t\t\t\t\ttype: 'phrase_prefix',\n\t\t\t\t\t\toperator: 'and',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t}\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tmulti_match: {\n\t\t\t\t\tquery: value,\n\t\t\t\t\tfields,\n\t\t\t\t\ttype: 'best_fields',\n\t\t\t\t\toperator: 'or',\n\t\t\t\t\tfuzziness: props.fuzziness ? props.fuzziness : 0,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tmulti_match: {\n\t\t\t\t\tquery: value,\n\t\t\t\t\tfields,\n\t\t\t\t\ttype: 'phrase_prefix',\n\t\t\t\t\toperator: 'or',\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t};\n\n\tonSuggestions = (results) => {\n\t\tif (this.props.onSuggestion) {\n\t\t\treturn results.map(suggestion => this.props.onSuggestion(suggestion));\n\t\t}\n\n\t\tconst fields = Array.isArray(this.props.dataField)\n\t\t\t? this.props.dataField : [this.props.dataField];\n\n\t\treturn getSuggestions(\n\t\t\tfields,\n\t\t\tresults,\n\t\t\tthis.state.currentValue.toLowerCase(),\n\t\t);\n\t};\n\n\tsetValue = (value, isDefaultValue = false, props = this.props) => {\n\t\t// ignore state updates when component is locked\n\t\tif (props.beforeValueChange && this.locked) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.locked = true;\n\t\tconst performUpdate = () => {\n\t\t\tthis.setState({\n\t\t\t\tcurrentValue: value,\n\t\t\t}, () => {\n\t\t\t\tif (isDefaultValue) {\n\t\t\t\t\tif (this.props.autosuggest) {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tisOpen: false,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.updateQuery(this.internalComponent, value, props);\n\t\t\t\t\t}\n\t\t\t\t\tthis.updateQuery(props.componentId, value, props);\n\t\t\t\t} else {\n\t\t\t\t\t// debounce for handling text while typing\n\t\t\t\t\tthis.handleTextChange(value);\n\t\t\t\t}\n\t\t\t\tthis.locked = false;\n\t\t\t\tif (props.onValueChange) props.onValueChange(value);\n\t\t\t});\n\t\t};\n\t\tcheckValueChange(\n\t\t\tprops.componentId,\n\t\t\tvalue,\n\t\t\tprops.beforeValueChange,\n\t\t\tperformUpdate,\n\t\t);\n\t};\n\n\thandleTextChange = debounce((value) => {\n\t\tif (this.props.autosuggest) {\n\t\t\tthis.updateQuery(this.internalComponent, value, this.props);\n\t\t} else {\n\t\t\tthis.updateQuery(this.props.componentId, value, this.props);\n\t\t}\n\t}, this.props.debounce);\n\n\tupdateQuery = (componentId, value, props) => {\n\t\tconst query = props.customQuery || DataSearch.defaultQuery;\n\n\t\tprops.updateQuery({\n\t\t\tcomponentId,\n\t\t\tquery: query(value, props),\n\t\t\tvalue,\n\t\t\tlabel: props.filterLabel,\n\t\t\tshowFilter: props.showFilter,\n\t\t\tURLParams: props.URLParams,\n\t\t});\n\t};\n\n\thandleFocus = (event) => {\n\t\tthis.setState({\n\t\t\tisOpen: true,\n\t\t});\n\t\tif (this.props.onFocus) {\n\t\t\tthis.props.onFocus(event);\n\t\t}\n\t};\n\n\tclearValue = () => {\n\t\tthis.setValue('', true);\n\t\tconsole.log('clear val')\n\t\tthis.onValueSelected('');\n\t};\n\n\t// only works if there's a change in downshift's value\n\thandleOuterClick = (event) => {\n\t\tthis.setValue(this.state.currentValue, true);\n\t\tconsole.log('outerclick', this.state.currentValue)\n\t\tthis.onValueSelected();\n\t\tif (this.props.onBlur) {\n\t\t\tthis.props.onBlur(event);\n\t\t}\n\t};\n\n\thandleKeyDown = (event) => {\n\t\tif (event.key === 'Enter') {\n\t\t\tevent.target.blur();\n\t\t\tthis.setValue(event.target.value, true);\n\t\t}\n\t\tif (this.props.onKeyDown) {\n\t\t\tthis.props.onKeyDown(event);\n\t\t}\n\t};\n\n\tonInputChange = (e) => {\n\t\tconst { value } = e.target;\n\t\tif (value.trim() !== this.state.currentValue.trim()) {\n\t\t\tthis.setState({\n\t\t\t\tsuggestions: [],\n\t\t\t}, () => {\n\t\t\t\tthis.setValue(value);\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setValue(value);\n\t\t}\n\t};\n\n\tonSuggestionSelected = (suggestion, event) => {\n\t\tconsole.log('sug sel')\n\t\tthis.setValue(suggestion.value, true);\n\t\tthis.onValueSelected(suggestion.value);\n\t\tif (this.props.onBlur) {\n\t\t\tthis.props.onBlur(event);\n\t\t}\n\t};\n\n\tonValueSelected = (currentValue = this.state.currentValue) => {\n\t\tconst { onValueSelected } = this.props;\n\t\tconsole.log('g', currentValue)\n\t\tif (onValueSelected) {\n\t\t\tonValueSelected(currentValue);\n\t\t}\n\t}\n\n\thandleStateChange = (changes) => {\n\t\tconst { isOpen, type } = changes;\n\t\tif (type === Downshift.stateChangeTypes.mouseUp) {\n\t\t\tthis.setState({\n\t\t\t\tisOpen,\n\t\t\t});\n\t\t}\n\t};\n\n\tgetBackgroundColor = (highlightedIndex, index) => {\n\t\tconst isDark = this.props.themePreset === 'dark';\n\t\tif (isDark) {\n\t\t\treturn highlightedIndex === index\n\t\t\t\t? '#555' : '#424242';\n\t\t}\n\t\treturn highlightedIndex === index\n\t\t\t? '#eee' : '#fff';\n\t};\n\n\trenderIcon = () => {\n\t\tif (this.props.showIcon) {\n\t\t\treturn this.props.icon || <SearchSvg />;\n\t\t}\n\t\treturn null;\n\t}\n\n\trenderCancelIcon = () => {\n\t\tif (this.props.showClear) {\n\t\t\treturn this.props.clearIcon || <CancelSvg />;\n\t\t}\n\t\treturn null;\n\t}\n\n\trenderIcons = () => (\n\t\t<div>\n\t\t\t{\n\t\t\t\tthis.state.currentValue && this.props.showClear\n\t\t\t\t&& (\n\t\t\t\t\t<InputIcon\n\t\t\t\t\t\tonClick={this.clearValue}\n\t\t\t\t\t\ticonPosition=\"right\"\n\t\t\t\t\t\tclearIcon={this.props.iconPosition === 'right'}\n\t\t\t\t\t>\n\t\t\t\t\t\t{this.renderCancelIcon()}\n\t\t\t\t\t</InputIcon>\n\t\t\t\t)\n\t\t\t}\n\t\t\t<InputIcon iconPosition={this.props.iconPosition}>{this.renderIcon()}</InputIcon>\n\t\t</div>\n\t);\n\n\trender() {\n\t\tlet suggestionsList = [];\n\n\t\tif (\n\t\t\t!this.state.currentValue\n\t\t\t&& this.props.defaultSuggestions\n\t\t\t&& this.props.defaultSuggestions.length\n\t\t) {\n\t\t\tsuggestionsList = this.props.defaultSuggestions;\n\t\t} else if (this.state.currentValue) {\n\t\t\tsuggestionsList = this.state.suggestions;\n\t\t}\n\n\t\tconst { theme, themePreset } = this.props;\n\n\t\treturn (\n\t\t\t<Container style={this.props.style} className={this.props.className}>\n\t\t\t\t{this.props.title && <Title className={getClassName(this.props.innerClass, 'title') || null}>{this.props.title}</Title>}\n\t\t\t\t{\n\t\t\t\t\tthis.props.autosuggest\n\t\t\t\t\t\t? (<Downshift\n\t\t\t\t\t\t\tid={`${this.props.componentId}-downshift`}\n\t\t\t\t\t\t\tonChange={this.onSuggestionSelected}\n\t\t\t\t\t\t\tonOuterClick={this.handleOuterClick}\n\t\t\t\t\t\t\tonStateChange={this.handleStateChange}\n\t\t\t\t\t\t\tisOpen={this.state.isOpen}\n\t\t\t\t\t\t\titemToString={i => i}\n\t\t\t\t\t\t\trender={({\n\t\t\t\t\t\t\t\tgetInputProps,\n\t\t\t\t\t\t\t\tgetItemProps,\n\t\t\t\t\t\t\t\tisOpen,\n\t\t\t\t\t\t\t\thighlightedIndex,\n\t\t\t\t\t\t\t}) => (\n\t\t\t\t\t\t\t\t<div className={suggestionsContainer}>\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\tid={`${this.props.componentId}-input`}\n\t\t\t\t\t\t\t\t\t\tshowIcon={this.props.showIcon}\n\t\t\t\t\t\t\t\t\t\tshowClear={this.props.showClear}\n\t\t\t\t\t\t\t\t\t\ticonPosition={this.props.iconPosition}\n\t\t\t\t\t\t\t\t\t\tinnerRef={this.props.innerRef}\n\t\t\t\t\t\t\t\t\t\t{...getInputProps({\n\t\t\t\t\t\t\t\t\t\t\tclassName: getClassName(this.props.innerClass, 'input'),\n\t\t\t\t\t\t\t\t\t\t\tplaceholder: this.props.placeholder,\n\t\t\t\t\t\t\t\t\t\t\tvalue: this.state.currentValue === null ? '' : this.state.currentValue,\n\t\t\t\t\t\t\t\t\t\t\tonChange: this.onInputChange,\n\t\t\t\t\t\t\t\t\t\t\tonBlur: this.handleOuterClick,\n\t\t\t\t\t\t\t\t\t\t\tonFocus: this.handleFocus,\n\t\t\t\t\t\t\t\t\t\t\tonKeyPress: this.props.onKeyPress,\n\t\t\t\t\t\t\t\t\t\t\tonKeyDown: this.handleKeyDown,\n\t\t\t\t\t\t\t\t\t\t\tonKeyUp: this.props.onKeyUp,\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tthemePreset={themePreset}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{this.renderIcons()}\n\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tisOpen && suggestionsList.length\n\t\t\t\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\t\t\t\t<ul className={`${suggestions(themePreset, theme)} ${getClassName(this.props.innerClass, 'list')}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuggestionsList\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(0, 10)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((item, index) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...getItemProps({ item })}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`${index + 1}-${item.value}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: this.getBackgroundColor(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thighlightedIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttypeof item.label === 'string'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? <div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"trim\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t__html: item.label,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: item.label\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>)\n\t\t\t\t\t\t: (\n\t\t\t\t\t\t\t<div className={suggestionsContainer}>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tclassName={getClassName(this.props.innerClass, 'input') || null}\n\t\t\t\t\t\t\t\t\tplaceholder={this.props.placeholder}\n\t\t\t\t\t\t\t\t\tvalue={this.state.currentValue ? this.state.currentValue : ''}\n\t\t\t\t\t\t\t\t\tonChange={this.onInputChange}\n\t\t\t\t\t\t\t\t\tonBlur={this.props.onBlur}\n\t\t\t\t\t\t\t\t\tonFocus={this.props.onFocus}\n\t\t\t\t\t\t\t\t\tonKeyPress={this.props.onKeyPress}\n\t\t\t\t\t\t\t\t\tonKeyDown={this.props.onKeyDown}\n\t\t\t\t\t\t\t\t\tonKeyUp={this.props.onKeyUp}\n\t\t\t\t\t\t\t\t\tautoFocus={this.props.autoFocus}\n\t\t\t\t\t\t\t\t\ticonPosition={this.props.iconPosition}\n\t\t\t\t\t\t\t\t\tshowIcon={this.props.showIcon}\n\t\t\t\t\t\t\t\t\tshowClear={this.props.showClear}\n\t\t\t\t\t\t\t\t\tinnerRef={this.props.innerRef}\n\t\t\t\t\t\t\t\t\tthemePreset={themePreset}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{this.renderIcons()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</Container>\n\t\t);\n\t}\n}\n\nDataSearch.propTypes = {\n\taddComponent: types.funcRequired,\n\tremoveComponent: types.funcRequired,\n\tsetQueryListener: types.funcRequired,\n\tsetQueryOptions: types.funcRequired,\n\tupdateQuery: types.funcRequired,\n\twatchComponent: types.funcRequired,\n\toptions: types.options,\n\tselectedValue: types.selectedValue,\n\tsuggestions: types.suggestions,\n\t// component props\n\tautoFocus: types.bool,\n\tautosuggest: types.bool,\n\tbeforeValueChange: types.func,\n\tclassName: types.string,\n\tclearIcon: types.children,\n\tcomponentId: types.stringRequired,\n\tcustomHighlight: types.func,\n\tcustomQuery: types.func,\n\tdataField: types.dataFieldArray,\n\tdebounce: types.number,\n\tdefaultSelected: types.string,\n\tdefaultSuggestions: types.suggestions,\n\tfieldWeights: types.fieldWeights,\n\tfilterLabel: types.string,\n\tfuzziness: types.fuzziness,\n\thighlight: types.bool,\n\thighlightField: types.stringOrArray,\n\ticon: types.children,\n\ticonPosition: types.iconPosition,\n\tinnerClass: types.style,\n\tinnerRef: types.func,\n\tonBlur: types.func,\n\tonFocus: types.func,\n\tonKeyDown: types.func,\n\tonKeyPress: types.func,\n\tonKeyUp: types.func,\n\tonQueryChange: types.func,\n\tonSuggestion: types.func,\n\tonValueChange: types.func,\n\tonValueSelected: types.func,\n\tplaceholder: types.string,\n\tqueryFormat: types.queryFormatSearch,\n\treact: types.react,\n\tshowClear: types.bool,\n\tshowFilter: types.bool,\n\tshowIcon: types.bool,\n\tstyle: types.style,\n\ttitle: types.title,\n\ttheme: types.style,\n\tthemePreset: types.themePreset,\n\tURLParams: types.bool,\n};\n\nDataSearch.defaultProps = {\n\tautosuggest: true,\n\tclassName: null,\n\tdebounce: 0,\n\ticonPosition: 'left',\n\tplaceholder: 'Search',\n\tqueryFormat: 'or',\n\tshowFilter: true,\n\tshowIcon: true,\n\tstyle: {},\n\tURLParams: false,\n\tshowClear: false,\n};\n\nconst mapStateToProps = (state, props) => ({\n\tselectedValue: (state.selectedValues[props.componentId]\n\t\t&& state.selectedValues[props.componentId].value) || null,\n\tsuggestions: state.hits[props.componentId] && state.hits[props.componentId].hits,\n\tthemePreset: state.config.themePreset,\n});\n\nconst mapDispatchtoProps = dispatch => ({\n\taddComponent: component => dispatch(addComponent(component)),\n\tremoveComponent: component => dispatch(removeComponent(component)),\n\tsetQueryOptions: (component, props) => dispatch(setQueryOptions(component, props)),\n\tupdateQuery: updateQueryObject => dispatch(updateQuery(updateQueryObject)),\n\twatchComponent: (component, react) => dispatch(watchComponent(component, react)),\n\tsetQueryListener: (component, onQueryChange, beforeQueryChange) =>\n\t\tdispatch(setQueryListener(component, onQueryChange, beforeQueryChange)),\n});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchtoProps,\n)(withTheme(DataSearch));\n"]}