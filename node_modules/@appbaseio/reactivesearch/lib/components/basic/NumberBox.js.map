{"version":3,"sources":["../../../src/components/basic/NumberBox.js"],"names":["NumberBox","props","type","state","currentValue","data","start","locked","setQueryListener","componentId","onQueryChange","componentWillMount","addComponent","setReact","selectedValue","setValue","defaultSelected","componentWillReceiveProps","nextProps","react","queryFormat","updateQuery","dataField","componentWillUnmount","removeComponent","watchComponent","render","style","className","title","innerClass","labelPosition","label","decrementValue","incrementValue","end","defaultQuery","value","term","range","lte","boost","gte","beforeValueChange","performUpdate","setState","onValueChange","query","customQuery","showFilter","URLParams","propTypes","funcRequired","string","stringRequired","dataNumberBox","number","func","queryFormatNumberBox","bool","defaultProps","mapStateToProps","selectedValues","mapDispatchtoProps","dispatch","component","updateQueryObject","beforeQueryChange"],"mappings":"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","file":"NumberBox.js","sourcesContent":["import React, { Component } from 'react';\n\nimport {\n\taddComponent,\n\tremoveComponent,\n\twatchComponent,\n\tupdateQuery,\n\tsetQueryListener,\n} from '@appbaseio/reactivecore/lib/actions';\nimport {\n\tcheckValueChange,\n\tcheckPropChange,\n\tgetClassName,\n} from '@appbaseio/reactivecore/lib/utils/helper';\nimport types from '@appbaseio/reactivecore/lib/utils/types';\n\nimport Title from '../../styles/Title';\nimport Button, { numberBoxContainer } from '../../styles/Button';\nimport Flex from '../../styles/Flex';\nimport Container from '../../styles/Container';\nimport { connect } from '../../utils';\n\nclass NumberBox extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.type = 'term';\n\t\tthis.state = {\n\t\t\tcurrentValue: this.props.data.start,\n\t\t};\n\t\tthis.locked = false;\n\t\tprops.setQueryListener(props.componentId, props.onQueryChange, null);\n\t}\n\n\tcomponentWillMount() {\n\t\tthis.props.addComponent(this.props.componentId);\n\t\tthis.setReact(this.props);\n\n\t\tif (this.props.selectedValue) {\n\t\t\tthis.setValue(this.props.selectedValue);\n\t\t} else if (this.props.defaultSelected) {\n\t\t\tthis.setValue(this.props.defaultSelected);\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tcheckPropChange(this.props.react, nextProps.react, () => {\n\t\t\tthis.setReact(nextProps);\n\t\t});\n\t\tcheckPropChange(this.props.defaultSelected, nextProps.defaultSelected, () => {\n\t\t\tthis.setValue(nextProps.defaultSelected, nextProps);\n\t\t});\n\t\tcheckPropChange(this.props.queryFormat, nextProps.queryFormat, () => {\n\t\t\tthis.updateQuery(this.state.currentValue, nextProps);\n\t\t});\n\t\tcheckPropChange(this.props.dataField, nextProps.dataField, () => {\n\t\t\tthis.updateQuery(this.state.currentValue, nextProps);\n\t\t});\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.props.removeComponent(this.props.componentId);\n\t}\n\n\tstatic defaultQuery = (value, props) => {\n\t\tswitch (props.queryFormat) {\n\t\t\tcase 'exact':\n\t\t\t\treturn {\n\t\t\t\t\tterm: {\n\t\t\t\t\t\t[props.dataField]: value,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\tcase 'lte':\n\t\t\t\treturn {\n\t\t\t\t\trange: {\n\t\t\t\t\t\t[props.dataField]: {\n\t\t\t\t\t\t\tlte: value,\n\t\t\t\t\t\t\tboost: 2.0,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\tdefault:\n\t\t\t\treturn {\n\t\t\t\t\trange: {\n\t\t\t\t\t\t[props.dataField]: {\n\t\t\t\t\t\t\tgte: value,\n\t\t\t\t\t\t\tboost: 2.0,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t}\n\t};\n\n\tsetReact(props) {\n\t\tif (props.react) {\n\t\t\tprops.watchComponent(props.componentId, props.react);\n\t\t}\n\t}\n\n\tincrementValue = () => {\n\t\tif (this.state.currentValue === this.props.data.end) {\n\t\t\treturn;\n\t\t}\n\t\tconst { currentValue } = this.state;\n\t\tthis.setValue(currentValue + 1);\n\t};\n\n\tdecrementValue = () => {\n\t\tif (this.state.currentValue === this.props.data.start) {\n\t\t\treturn;\n\t\t}\n\t\tconst { currentValue } = this.state;\n\t\tthis.setValue(currentValue - 1);\n\t};\n\n\tsetValue = (value, props = this.props) => {\n\t\t// ignore state updates when component is locked\n\t\tif (props.beforeValueChange && this.locked) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.locked = true;\n\t\tconst performUpdate = () => {\n\t\t\tthis.setState({\n\t\t\t\tcurrentValue: value,\n\t\t\t}, () => {\n\t\t\t\tthis.updateQuery(value, props);\n\t\t\t\tthis.locked = false;\n\t\t\t\tif (props.onValueChange) props.onValueChange(value);\n\t\t\t});\n\t\t};\n\t\tcheckValueChange(\n\t\t\tprops.componentId,\n\t\t\tvalue,\n\t\t\tprops.beforeValueChange,\n\t\t\tperformUpdate,\n\t\t);\n\t};\n\n\tupdateQuery = (value, props) => {\n\t\tconst query = props.customQuery || NumberBox.defaultQuery;\n\n\t\tprops.updateQuery({\n\t\t\tcomponentId: props.componentId,\n\t\t\tquery: query(value, props),\n\t\t\tvalue,\n\t\t\tshowFilter: false, // we don't need filters for NumberBox\n\t\t\tURLParams: props.URLParams,\n\t\t});\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<Container style={this.props.style} className={this.props.className}>\n\t\t\t\t{this.props.title && (\n\t\t\t\t\t<Title className={getClassName(this.props.innerClass, 'title') || null}>\n\t\t\t\t\t\t{this.props.title}\n\t\t\t\t\t</Title>\n\t\t\t\t)}\n\t\t\t\t<Flex labelPosition={this.props.labelPosition} justifyContent=\"space-between\" className={numberBoxContainer}>\n\t\t\t\t\t<span className={getClassName(this.props.innerClass, 'label') || null}>\n\t\t\t\t\t\t{this.props.data.label}\n\t\t\t\t\t</span>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName={getClassName(this.props.innerClass, 'button') || null}\n\t\t\t\t\t\t\tonClick={this.decrementValue}\n\t\t\t\t\t\t\tdisabled={this.state.currentValue === this.props.data.start}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<b>-</b>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{this.state.currentValue}\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName={getClassName(this.props.innerClass, 'button') || null}\n\t\t\t\t\t\t\tonClick={this.incrementValue}\n\t\t\t\t\t\t\tdisabled={this.state.currentValue === this.props.data.end}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<b>+</b>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</Flex>\n\t\t\t</Container>\n\t\t);\n\t}\n}\n\nNumberBox.propTypes = {\n\taddComponent: types.funcRequired,\n\tremoveComponent: types.funcRequired,\n\tsetQueryListener: types.funcRequired,\n\tupdateQuery: types.funcRequired,\n\twatchComponent: types.funcRequired,\n\tselectedValue: types.selectedValue,\n\t// component props\n\tclassName: types.string,\n\tcomponentId: types.stringRequired,\n\tdata: types.dataNumberBox,\n\tdataField: types.stringRequired,\n\tdefaultSelected: types.number,\n\tinnerClass: types.style,\n\tlabelPosition: types.labelPosition,\n\tonQueryChange: types.func,\n\tqueryFormat: types.queryFormatNumberBox,\n\treact: types.react,\n\tstyle: types.style,\n\ttitle: types.title,\n\tURLParams: types.bool,\n};\n\nNumberBox.defaultProps = {\n\tclassName: null,\n\tlabelPosition: 'left',\n\tqueryFormat: 'gte',\n\tstyle: {},\n\tURLParams: false,\n};\n\nconst mapStateToProps = (state, props) => ({\n\tselectedValue: state.selectedValues[props.componentId]\n\t\t? state.selectedValues[props.componentId].value\n\t\t: null,\n});\n\nconst mapDispatchtoProps = dispatch => ({\n\taddComponent: component => dispatch(addComponent(component)),\n\tremoveComponent: component => dispatch(removeComponent(component)),\n\tupdateQuery: updateQueryObject => dispatch(updateQuery(updateQueryObject)),\n\twatchComponent: (component, react) => dispatch(watchComponent(component, react)),\n\tsetQueryListener: (component, onQueryChange, beforeQueryChange) =>\n\t\tdispatch(setQueryListener(component, onQueryChange, beforeQueryChange)),\n});\n\nexport default connect(mapStateToProps, mapDispatchtoProps)(NumberBox);\n"]}