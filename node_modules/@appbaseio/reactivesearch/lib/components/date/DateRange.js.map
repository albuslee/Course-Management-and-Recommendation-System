{"version":3,"sources":["../../../src/components/date/DateRange.js"],"names":["DateRange","props","state","currentDate","locked","setQueryListener","componentId","onQueryChange","componentWillMount","addComponent","setReact","selectedValue","Array","isArray","handleDateChange","start","Date","end","defaultSelected","componentWillReceiveProps","nextProps","react","formatInputDate","dataField","updateQuery","formatDate","componentWillUnmount","removeComponent","watchComponent","render","selectedDays","from","to","modifiers","style","className","showClear","title","innerClass","background","theme","colors","backgroundColor","focused","placeholder","numberOfMonths","initialMonth","handleStartDate","readOnly","container","overlayWrapper","overlay","dayPickerInputProps","clearDayPickerStart","getEndDateRef","disabledDays","before","handleEndDate","clearDayPickerEnd","date","queryFormat","getTime","Math","floor","toString","xdate","valid","defaultQuery","value","query","length","bool","must","range","lte","gte","ref","endDateRef","autoFocus","autoFocusEnd","window","setTimeout","getInput","focus","isDefaultValue","beforeValueChange","performUpdate","setState","onValueChange","customQuery","showFilter","label","filterLabel","URLParams","propTypes","funcRequired","string","stringRequired","dateObject","number","func","rangeLabels","queryFormatDate","defaultProps","mapStateToProps","selectedValues","mapDispatchtoProps","dispatch","component","updateQueryObject","beforeQueryChange"],"mappings":"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","file":"DateRange.js","sourcesContent":["import React, { Component } from 'react';\nimport {\n\taddComponent,\n\tremoveComponent,\n\twatchComponent,\n\tupdateQuery,\n\tsetQueryListener,\n} from '@appbaseio/reactivecore/lib/actions';\nimport {\n\tisEqual,\n\tcheckValueChange,\n\tcheckPropChange,\n\tgetClassName,\n} from '@appbaseio/reactivecore/lib/utils/helper';\nimport dateFormats from '@appbaseio/reactivecore/lib/utils/dateFormats';\nimport types from '@appbaseio/reactivecore/lib/utils/types';\nimport XDate from 'xdate';\nimport DayPickerInput from 'react-day-picker/DayPickerInput';\nimport { withTheme } from 'emotion-theming';\n\nimport DateContainer from '../../styles/DateContainer';\nimport Title from '../../styles/Title';\nimport Flex from '../../styles/Flex';\nimport { connect } from '../../utils';\n\nimport CancelSvg from '../shared/CancelSvg';\n\nclass DateRange extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tcurrentDate: null,\n\t\t};\n\t\tthis.locked = false;\n\t\tprops.setQueryListener(props.componentId, props.onQueryChange, null);\n\t}\n\n\tcomponentWillMount() {\n\t\tthis.props.addComponent(this.props.componentId);\n\t\tthis.setReact(this.props);\n\n\t\tif (this.props.selectedValue) {\n\t\t\t// parsing string values from selectedValue to date objects for DayPicker\n\t\t\t// for value as an array from URL\n\t\t\tif (Array.isArray(this.props.selectedValue)) {\n\t\t\t\tthis.handleDateChange({\n\t\t\t\t\tstart: new Date(this.props.selectedValue[0]),\n\t\t\t\t\tend: new Date(this.props.selectedValue[1]),\n\t\t\t\t}, false);\n\t\t\t} else {\n\t\t\t\t// for value as an object for SSR\n\t\t\t\tconst { start, end } = this.props.selectedValue;\n\t\t\t\tthis.handleDateChange({\n\t\t\t\t\tstart: new Date(start),\n\t\t\t\t\tend: new Date(end),\n\t\t\t\t}, false);\n\t\t\t}\n\t\t} else if (this.props.defaultSelected) {\n\t\t\tthis.handleDateChange(this.props.defaultSelected, false);\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tcheckPropChange(this.props.react, nextProps.react, () =>\n\t\t\tthis.setReact(nextProps));\n\t\tif (!isEqual(this.props.defaultSelected, nextProps.defaultSelected)) {\n\t\t\tthis.handleDateChange(nextProps.defaultSelected, false, nextProps);\n\t\t} else {\n\t\t\tconst { currentDate } = this.state;\n\t\t\tconst { selectedValue } = nextProps;\n\t\t\t// comparing array format of selectedValue with object form of the state if not null\n\t\t\tif (\n\t\t\t\t!isEqual(\n\t\t\t\t\tcurrentDate ? [\n\t\t\t\t\t\tthis.formatInputDate(currentDate.start),\n\t\t\t\t\t\tthis.formatInputDate(currentDate.end),\n\t\t\t\t\t] : null,\n\t\t\t\t\tselectedValue,\n\t\t\t\t)\n\t\t\t\t&& !isEqual(this.props.selectedValue, selectedValue)\n\t\t\t) {\n\t\t\t\tthis.handleDateChange(selectedValue ? {\n\t\t\t\t\tstart: nextProps.selectedValue[0],\n\t\t\t\t\tend: nextProps.selectedValue[1],\n\t\t\t\t} : null, true, nextProps);\n\t\t\t}\n\t\t}\n\t\tcheckPropChange(\n\t\t\tthis.props.dataField,\n\t\t\tnextProps.dataField,\n\t\t\t() => this.updateQuery(\n\t\t\t\tthis.state.currentDate\n\t\t\t\t\t? { // we need the date in correct queryFormat\n\t\t\t\t\t\tstart: this.formatDate(this.state.currentDate.start),\n\t\t\t\t\t\tend: this.formatDate(this.state.currentDate.end),\n\t\t\t\t\t}\n\t\t\t\t\t: this.state.currentDate,\n\t\t\t\tnextProps,\n\t\t\t),\n\t\t);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.props.removeComponent(this.props.componentId);\n\t}\n\n\tsetReact(props) {\n\t\tif (props.react) {\n\t\t\tprops.watchComponent(props.componentId, props.react);\n\t\t}\n\t}\n\n\tformatDate = (date, props = this.props) => {\n\t\tswitch (props.queryFormat) {\n\t\t\tcase 'epoch_millis':\n\t\t\t\treturn date.getTime();\n\t\t\tcase 'epoch_seconds':\n\t\t\t\treturn Math.floor(date.getTime() / 1000);\n\t\t\tdefault: {\n\t\t\t\tif (dateFormats[props.queryFormat]) {\n\t\t\t\t\treturn date.toString(dateFormats[props.queryFormat]);\n\t\t\t\t}\n\t\t\t\treturn date;\n\t\t\t}\n\t\t}\n\t};\n\n\tformatInputDate = (date) => {\n\t\tconst xdate = new XDate(date);\n\t\treturn xdate.valid() ? xdate.toString('yyyy-MM-dd') : '';\n\t};\n\n\tdefaultQuery = (value, props) => {\n\t\tlet query = null;\n\t\tif (value) {\n\t\t\tif (Array.isArray(props.dataField) && props.dataField.length === 2) {\n\t\t\t\tquery = {\n\t\t\t\t\tbool: {\n\t\t\t\t\t\tmust: [{\n\t\t\t\t\t\t\trange: {\n\t\t\t\t\t\t\t\t[props.dataField[0]]: {\n\t\t\t\t\t\t\t\t\tlte: this.formatDate(new XDate(value.start), props),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\trange: {\n\t\t\t\t\t\t\t\t[props.dataField[1]]: {\n\t\t\t\t\t\t\t\t\tgte: this.formatDate(new XDate(value.end), props),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}],\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t} else if (Array.isArray(props.dataField)) {\n\t\t\t\tquery = {\n\t\t\t\t\trange: {\n\t\t\t\t\t\t[props.dataField[0]]: {\n\t\t\t\t\t\t\tgte: this.formatDate(new XDate(value.start), props),\n\t\t\t\t\t\t\tlte: this.formatDate(new XDate(value.end), props),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tquery = {\n\t\t\t\t\trange: {\n\t\t\t\t\t\t[props.dataField]: {\n\t\t\t\t\t\t\tgte: this.formatDate(new XDate(value.start), props),\n\t\t\t\t\t\t\tlte: this.formatDate(new XDate(value.end), props),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn query;\n\t};\n\n\tgetEndDateRef = (ref) => {\n\t\tthis.endDateRef = ref;\n\t}\n\n\tclearDayPickerStart = () => {\n\t\tif (this.state.currentDate && this.state.currentDate.start !== '') {\n\t\t\tthis.handleStartDate('', false); // resets the day picker component\n\t\t}\n\t};\n\n\tclearDayPickerEnd = () => {\n\t\tif (this.state.currentDate && this.state.currentDate.end !== '') {\n\t\t\tthis.handleEndDate(''); // resets the day picker component\n\t\t}\n\t};\n\n\thandleStartDate = (date, autoFocus = true) => {\n\t\tconst { currentDate } = this.state;\n\t\tconst end = currentDate ? currentDate.end : '';\n\t\tthis.handleDateChange({\n\t\t\tstart: date,\n\t\t\tend,\n\t\t});\n\t\t// focus the end date DayPicker if its empty\n\t\tif (this.props.autoFocusEnd && autoFocus) {\n\t\t\t// TODO: replace with a single date component in v2.1.0\n\t\t\twindow.setTimeout(() => this.endDateRef.getInput().focus(), 0);\n\t\t}\n\t}\n\n\thandleEndDate = (date) => {\n\t\tconst { currentDate } = this.state;\n\t\tthis.handleDateChange({\n\t\t\tstart: currentDate ? currentDate.start : '',\n\t\t\tend: date,\n\t\t});\n\t}\n\n\thandleDateChange = (\n\t\tcurrentDate,\n\t\tisDefaultValue = false,\n\t\tprops = this.props,\n\t) => {\n\t\t// ignore state updates when component is locked\n\t\tif (props.beforeValueChange && this.locked) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.locked = true;\n\t\tlet value = null;\n\t\tif (currentDate && !(currentDate.start === '' && currentDate.end === '')) {\n\t\t\tvalue = isDefaultValue\n\t\t\t\t? currentDate\n\t\t\t\t: {\n\t\t\t\t\tstart: this.formatInputDate(currentDate.start),\n\t\t\t\t\tend: this.formatInputDate(currentDate.end),\n\t\t\t\t};\n\t\t}\n\n\t\tconst performUpdate = () => {\n\t\t\tthis.setState({\n\t\t\t\tcurrentDate,\n\t\t\t}, () => {\n\t\t\t\tthis.updateQuery(value, props);\n\t\t\t\tthis.locked = false;\n\t\t\t\tif (props.onValueChange) props.onValueChange(value);\n\t\t\t});\n\t\t};\n\t\tcheckValueChange(\n\t\t\tprops.componentId,\n\t\t\tvalue,\n\t\t\tprops.beforeValueChange,\n\t\t\tperformUpdate,\n\t\t);\n\t};\n\n\tupdateQuery = (value, props) => {\n\t\tif (!value || (value && value.start.length && value.end.length)) {\n\t\t\tconst query = props.customQuery || this.defaultQuery;\n\n\t\t\tprops.updateQuery({\n\t\t\t\tcomponentId: props.componentId,\n\t\t\t\tquery: query(value, props),\n\t\t\t\tvalue: value ? [value.start, value.end] : null,\n\t\t\t\tshowFilter: props.showFilter,\n\t\t\t\tlabel: props.filterLabel,\n\t\t\t\tURLParams: props.URLParams,\n\t\t\t});\n\t\t}\n\t};\n\n\trender() {\n\t\tconst { currentDate } = this.state;\n\t\tconst start = currentDate ? currentDate.start : '';\n\t\tconst end = currentDate ? currentDate.end : '';\n\t\tconst selectedDays = [\n\t\t\tstart, { from: start, to: end },\n\t\t];\n\t\tconst modifiers = { start, end };\n\t\treturn (\n\t\t\t<DateContainer\n\t\t\t\trange\n\t\t\t\tstyle={this.props.style}\n\t\t\t\tclassName={this.props.className}\n\t\t\t\tshowBorder={!this.props.showClear}\n\t\t\t>\n\t\t\t\t{this.props.title && (\n\t\t\t\t\t<Title\n\t\t\t\t\t\tclassName={getClassName(this.props.innerClass, 'title') || null}\n\t\t\t\t\t>\n\t\t\t\t\t\t{this.props.title}\n\t\t\t\t\t</Title>\n\t\t\t\t)}\n\t\t\t\t<Flex className={getClassName(this.props.innerClass, 'input-container') || null}>\n\t\t\t\t\t<Flex\n\t\t\t\t\t\tflex={2}\n\t\t\t\t\t\tshowBorder={this.props.showClear}\n\t\t\t\t\t\ticonPosition=\"right\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tbackground: this.props.theme.colors.backgroundColor || 'transparent',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DayPickerInput\n\t\t\t\t\t\t\tshowOverlay={this.props.focused}\n\t\t\t\t\t\t\tformatDate={this.formatInputDate}\n\t\t\t\t\t\t\tvalue={start}\n\t\t\t\t\t\t\tplaceholder={this.props.placeholder.start}\n\t\t\t\t\t\t\tdayPickerProps={{\n\t\t\t\t\t\t\t\tnumberOfMonths: this.props.numberOfMonths,\n\t\t\t\t\t\t\t\tinitialMonth: this.props.initialMonth,\n\t\t\t\t\t\t\t\tselectedDays,\n\t\t\t\t\t\t\t\tmodifiers,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonDayChange={this.handleStartDate}\n\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\treadOnly: true,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassNames={{\n\t\t\t\t\t\t\t\tcontainer:\n\t\t\t\t\t\t\t\t\tgetClassName(this.props.innerClass, 'daypicker-container')\n\t\t\t\t\t\t\t\t\t|| 'DayPickerInput',\n\t\t\t\t\t\t\t\toverlayWrapper:\n\t\t\t\t\t\t\t\t\tgetClassName(\n\t\t\t\t\t\t\t\t\t\tthis.props.innerClass,\n\t\t\t\t\t\t\t\t\t\t'daypicker-overlay-wrapper',\n\t\t\t\t\t\t\t\t\t) || 'DayPickerInput-OverlayWrapper',\n\t\t\t\t\t\t\t\toverlay:\n\t\t\t\t\t\t\t\t\tgetClassName(this.props.innerClass, 'daypicker-overlay')\n\t\t\t\t\t\t\t\t\t|| 'DayPickerInput-Overlay',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t{...this.props.dayPickerInputProps}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{this.props.showClear\n\t\t\t\t\t\t\t&& this.state.currentDate\n\t\t\t\t\t\t\t&& this.state.currentDate.start && (\n\t\t\t\t\t\t\t<CancelSvg onClick={this.clearDayPickerStart} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Flex>\n\t\t\t\t\t<Flex justifyContent=\"center\" alignItems=\"center\" basis=\"20px\">\n\t\t\t\t\t\t-\n\t\t\t\t\t</Flex>\n\t\t\t\t\t<Flex\n\t\t\t\t\t\tflex={2}\n\t\t\t\t\t\tshowBorder={this.props.showClear}\n\t\t\t\t\t\ticonPosition=\"right\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tbackground: this.props.theme.colors.backgroundColor || 'transparent',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DayPickerInput\n\t\t\t\t\t\t\tref={this.getEndDateRef}\n\t\t\t\t\t\t\tshowOverlay={this.props.focused}\n\t\t\t\t\t\t\tformatDate={this.formatInputDate}\n\t\t\t\t\t\t\tvalue={end}\n\t\t\t\t\t\t\tplaceholder={this.props.placeholder.end}\n\t\t\t\t\t\t\tdayPickerProps={{\n\t\t\t\t\t\t\t\tnumberOfMonths: this.props.numberOfMonths,\n\t\t\t\t\t\t\t\tinitialMonth: this.props.initialMonth,\n\t\t\t\t\t\t\t\tdisabledDays: { before: this.state.currentDate ? this.state.currentDate.start : '' },\n\t\t\t\t\t\t\t\tselectedDays,\n\t\t\t\t\t\t\t\tmodifiers,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonDayChange={this.handleEndDate}\n\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\treadOnly: true,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassNames={{\n\t\t\t\t\t\t\t\tcontainer:\n\t\t\t\t\t\t\t\t\tgetClassName(this.props.innerClass, 'daypicker-container')\n\t\t\t\t\t\t\t\t\t|| 'DayPickerInput',\n\t\t\t\t\t\t\t\toverlayWrapper:\n\t\t\t\t\t\t\t\t\tgetClassName(\n\t\t\t\t\t\t\t\t\t\tthis.props.innerClass,\n\t\t\t\t\t\t\t\t\t\t'daypicker-overlay-wrapper',\n\t\t\t\t\t\t\t\t\t) || 'DayPickerInput-OverlayWrapper',\n\t\t\t\t\t\t\t\toverlay:\n\t\t\t\t\t\t\t\t\tgetClassName(this.props.innerClass, 'daypicker-overlay')\n\t\t\t\t\t\t\t\t\t|| 'DayPickerInput-Overlay',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t{...this.props.dayPickerInputProps}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{this.props.showClear\n\t\t\t\t\t\t\t&& this.state.currentDate\n\t\t\t\t\t\t\t&& this.state.currentDate.end && (\n\t\t\t\t\t\t\t<CancelSvg onClick={this.clearDayPickerEnd} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Flex>\n\t\t\t\t</Flex>\n\t\t\t</DateContainer>\n\t\t);\n\t}\n}\n\nDateRange.propTypes = {\n\taddComponent: types.funcRequired,\n\tremoveComponent: types.funcRequired,\n\tsetQueryListener: types.funcRequired,\n\tupdateQuery: types.funcRequired,\n\twatchComponent: types.funcRequired,\n\tselectedValue: types.selectedValue,\n\t// component props\n\tautoFocusEnd: types.bool,\n\tclassName: types.string,\n\tcomponentId: types.stringRequired,\n\tdataField: types.stringRequired,\n\tdayPickerInputProps: types.props,\n\tdefaultSelected: types.dateObject,\n\tfilterLabel: types.string,\n\tfocused: types.bool,\n\tinitialMonth: types.dateObject,\n\tinnerClass: types.style,\n\tnumberOfMonths: types.number,\n\tonQueryChange: types.func,\n\tplaceholder: types.rangeLabels,\n\tqueryFormat: types.queryFormatDate,\n\treact: types.react,\n\tshowClear: types.bool,\n\tshowFilter: types.bool,\n\tstyle: types.style,\n\ttheme: types.style,\n\ttitle: types.string,\n};\n\nDateRange.defaultProps = {\n\tautoFocusEnd: true,\n\tnumberOfMonths: 2,\n\tplaceholder: {\n\t\tstart: 'Start date',\n\t\tend: 'End date',\n\t},\n\tshowClear: true,\n\tshowFilter: true,\n};\n\nconst mapStateToProps = (state, props) => ({\n\tselectedValue: state.selectedValues[props.componentId]\n\t\t? state.selectedValues[props.componentId].value\n\t\t: null,\n});\n\nconst mapDispatchtoProps = dispatch => ({\n\taddComponent: component => dispatch(addComponent(component)),\n\tremoveComponent: component => dispatch(removeComponent(component)),\n\tupdateQuery: updateQueryObject => dispatch(updateQuery(updateQueryObject)),\n\twatchComponent: (component, react) => dispatch(watchComponent(component, react)),\n\tsetQueryListener: (component, onQueryChange, beforeQueryChange) =>\n\t\tdispatch(setQueryListener(component, onQueryChange, beforeQueryChange)),\n});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchtoProps,\n)(withTheme(DateRange));\n"]}