{"version":3,"sources":["../../../src/components/shared/Dropdown.js"],"names":["Dropdown","props","toggle","setState","isOpen","state","close","onChange","item","returnsObject","keyField","multi","handleStateChange","changes","type","stateChangeTypes","mouseUp","getBackgroundColor","highlighted","selected","isDark","themePreset","renderToString","value","Array","isArray","length","arrayToRender","map","join","labelField","Object","keys","placeholder","render","items","selectedItem","theme","renderListItem","i","getButtonProps","getItemProps","highlightedIndex","innerClass","small","index","find","key","backgroundColor","doc_count","__html","showCount","defaultProps","propTypes","style","data","string","bool","func","selectedValue","single"],"mappings":"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","file":"Dropdown.js","sourcesContent":["import React, { Component } from 'react';\nimport Downshift from 'downshift';\nimport { withTheme } from 'emotion-theming';\n\nimport types from '@appbaseio/reactivecore/lib/utils/types';\nimport { getClassName } from '@appbaseio/reactivecore/lib/utils/helper';\n\nimport { suggestionsContainer, suggestions } from '../../styles/Input';\nimport Select, { Tick } from '../../styles/Select';\nimport Chevron from '../../styles/Chevron';\n\nclass Dropdown extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tisOpen: false,\n\t\t};\n\t}\n\n\ttoggle = () => {\n\t\tthis.setState({\n\t\t\tisOpen: !this.state.isOpen,\n\t\t});\n\t};\n\n\tclose = () => {\n\t\tthis.setState({\n\t\t\tisOpen: false,\n\t\t});\n\t};\n\n\tonChange = (item) => {\n\t\tif (this.props.returnsObject) {\n\t\t\tthis.props.onChange(item);\n\t\t} else {\n\t\t\tthis.props.onChange(item[this.props.keyField]);\n\t\t}\n\n\t\tif (!this.props.multi) {\n\t\t\tthis.setState({\n\t\t\t\tisOpen: false,\n\t\t\t});\n\t\t}\n\t};\n\n\thandleStateChange = (changes) => {\n\t\tconst { isOpen, type } = changes;\n\t\tif (type === Downshift.stateChangeTypes.mouseUp) {\n\t\t\tthis.setState({\n\t\t\t\tisOpen,\n\t\t\t});\n\t\t}\n\t};\n\n\tgetBackgroundColor = (highlighted, selected) => {\n\t\tconst isDark = this.props.themePreset === 'dark';\n\t\tif (highlighted) {\n\t\t\treturn isDark ? '#555' : '#eee';\n\t\t} else if (selected) {\n\t\t\treturn isDark ? '#686868' : '#fafafa';\n\t\t}\n\t\treturn isDark ? '#424242' : '#fff';\n\t};\n\n\trenderToString = (value) => {\n\t\tif (Array.isArray(value) && value.length) {\n\t\t\tconst arrayToRender = value.map(item => this.renderToString(item));\n\t\t\treturn arrayToRender.join(', ');\n\t\t} else if (value && typeof value === 'object') {\n\t\t\tif (value[this.props.labelField]) {\n\t\t\t\treturn value[this.props.labelField];\n\t\t\t} else if (Object.keys(value).length) {\n\t\t\t\treturn this.renderToString(Object.keys(value));\n\t\t\t}\n\t\t\treturn this.props.placeholder;\n\t\t}\n\t\treturn value;\n\t};\n\n\trender() {\n\t\tconst {\n\t\t\titems,\n\t\t\tselectedItem,\n\t\t\tplaceholder,\n\t\t\tlabelField,\n\t\t\tkeyField,\n\t\t\tthemePreset,\n\t\t\ttheme,\n\t\t\trenderListItem,\n\t\t} = this.props;\n\n\t\treturn (<Downshift\n\t\t\tselectedItem={selectedItem}\n\t\t\tonChange={this.onChange}\n\t\t\tonOuterClick={this.close}\n\t\t\tonStateChange={this.handleStateChange}\n\t\t\tisOpen={this.state.isOpen}\n\t\t\titemToString={i => i && i[this.props.labelField]}\n\t\t\trender={({\n\t\t\t\tgetButtonProps,\n\t\t\t\tgetItemProps,\n\t\t\t\tisOpen,\n\t\t\t\thighlightedIndex,\n\t\t\t}) => (\n\t\t\t\t<div className={suggestionsContainer}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\t{...getButtonProps()}\n\t\t\t\t\t\tclassName={getClassName(this.props.innerClass, 'select') || null}\n\t\t\t\t\t\tonClick={this.toggle}\n\t\t\t\t\t\ttitle={selectedItem ? this.renderToString(selectedItem) : placeholder}\n\t\t\t\t\t\tsmall={this.props.small}\n\t\t\t\t\t\tthemePreset={this.props.themePreset}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div>{selectedItem ? this.renderToString(selectedItem) : placeholder}</div>\n\t\t\t\t\t\t<Chevron open={isOpen} />\n\t\t\t\t\t</Select>\n\t\t\t\t\t{\n\t\t\t\t\t\tisOpen && items.length\n\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t<ul className={`${suggestions(themePreset, theme)} ${this.props.small ? 'small' : ''} ${getClassName(this.props.innerClass, 'list')}`}>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\titems\n\t\t\t\t\t\t\t\t\t\t\t.map((item, index) => {\n\t\t\t\t\t\t\t\t\t\t\t\tlet selected = this.props.multi && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t// MultiDropdownList\n\t\t\t\t\t\t\t\t\t\t\t\t\t(selectedItem && !!selectedItem[item[keyField]])\n\t\t\t\t\t\t\t\t\t\t\t\t\t// MultiDropdownRange\n\t\t\t\t\t\t\t\t\t\t\t\t\t|| (Array.isArray(selectedItem)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t&& selectedItem.find(value =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue[labelField] === item[labelField]))\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (!this.props.multi) selected = item.key === selectedItem;\n\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...getItemProps({ item })}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item[keyField]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`${selected ? 'active' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: this.getBackgroundColor(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thighlightedIndex === index,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trenderListItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? renderListItem(item[labelField], item.doc_count)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttypeof item[labelField] === 'string'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? <span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t__html: item[labelField],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: item[labelField]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.props.showCount && item.doc_count\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&& (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetClassName(this.props.innerClass, 'count')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|| null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;({item.doc_count})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected && this.props.multi\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? (<Tick\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetClassName(this.props.innerClass, 'icon')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|| null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t/>);\n\t}\n}\n\nDropdown.defaultProps = {\n\tkeyField: 'key',\n\tlabelField: 'label',\n\tsmall: false,\n};\n\nDropdown.propTypes = {\n\tinnerClass: types.style,\n\titems: types.data,\n\tkeyField: types.string,\n\tlabelField: types.string,\n\tmulti: types.bool,\n\tonChange: types.func,\n\tplaceholder: types.string,\n\treturnsObject: types.bool,\n\trenderListItem: types.func,\n\tselectedItem: types.selectedValue,\n\tshowCount: types.bool,\n\tsingle: types.bool,\n\tsmall: types.bool,\n\ttheme: types.style,\n\tthemePreset: types.themePreset,\n};\n\nexport default withTheme(Dropdown);\n"]}